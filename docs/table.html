<html lang="en">
  <head>
    <title>COVID-19 data | Table</title>
    <link rel="stylesheet" href="uswds-2.5.1/css/uswds.min.css" />
    <link rel="stylesheet" type="text/css" href="style.css" />
  </head>
  <body>
    <div class="grid-container">
      <div class="grid-row">
      <div class="grid-col-3">
        <ul>
          <li><a href="index.html">Whole US</a></li>
          <li><a href="AL.html">Alabama</a></li>
          <li><a href="AK.html">Alaska</a></li>
          <li><a href="AS.html">American Samoa</a></li>
          <li><a href="AZ.html">Arizona</a></li>
          <li><a href="AR.html">Arkansas</a></li>
          <li><a href="CA.html">California</a></li>
          <li><a href="CO.html">Colorado</a></li>
          <li><a href="CT.html">Connecticut</a></li>
          <li><a href="DE.html">Delaware</a></li>
          <li><a href="DC.html">District of Columbia</a></li>
          <li><a href="FL.html">Florida</a></li>
          <li><a href="GA.html">Georgia</a></li>
          <li><a href="GU.html">Guam</a></li>
          <li><a href="HI.html">Hawaii</a></li>
          <li><a href="ID.html">Idaho</a></li>
          <li><a href="IL.html">Illinois</a></li>
          <li><a href="IN.html">Indiana</a></li>
          <li><a href="IA.html">Iowa</a></li>
          <li><a href="KS.html">Kansas</a></li>
          <li><a href="KY.html">Kentucky</a></li>
          <li><a href="LA.html">Louisiana</a></li>
          <li><a href="ME.html">Maine</a></li>
          <li><a href="MD.html">Maryland</a></li>
          <li><a href="MA.html">Massachusetts</a></li>
          <li><a href="MI.html">Michigan</a></li>
          <li><a href="MN.html">Minnesota</a></li>
          <li><a href="MS.html">Mississippi</a></li>
          <li><a href="MO.html">Missouri</a></li>
          <li><a href="MT.html">Montana</a></li>
          <li><a href="NE.html">Nebraska</a></li>
          <li><a href="NV.html">Nevada</a></li>
          <li><a href="NH.html">New Hampshire</a></li>
          <li><a href="NJ.html">New Jersey</a></li>
          <li><a href="NM.html">New Mexico</a></li>
          <li><a href="NY.html">New York</a></li>
          <li><a href="NC.html">North Carolina</a></li>
          <li><a href="ND.html">North Dakota</a></li>
          <li><a href="MP.html">Northern Mariana Islands</a></li>
          <li><a href="OH.html">Ohio</a></li>
          <li><a href="OK.html">Oklahoma</a></li>
          <li><a href="OR.html">Oregon</a></li>
          <li><a href="PA.html">Pennsylvania</a></li>
          <li><a href="PR.html">Puerto Rico</a></li>
          <li><a href="RI.html">Rhode Island</a></li>
          <li><a href="SC.html">South Carolina</a></li>
          <li><a href="SD.html">South Dakota</a></li>
          <li><a href="TN.html">Tennessee</a></li>
          <li><a href="TX.html">Texas</a></li>
          <li><a href="VI.html">U.S. Virgin Islands</a></li>
          <li><a href="UT.html">Utah</a></li>
          <li><a href="VT.html">Vermont</a></li>
          <li><a href="VA.html">Virginia</a></li>
          <li><a href="WA.html">Washington</a></li>
          <li><a href="WV.html">West Virginia</a></li>
          <li><a href="WI.html">Wisconsin</a></li>
          <li><a href="WY.html">Wyoming</a></li>
        </ul>
      </div>
        <div class="grid-col-9">

          <table cellpadding="0" cellspacing="0">
            <thead>
              <tr>
                <td class="bg-primary-lighter"></td>
                <th id="location" class="bg-primary-lighter">Location</th>
                <th id="deaths" class="bg-primary-lighter">Avg. deaths/day<br/>per million people</th>
                <th id="cases" class="bg-primary-lighter">Avg. cases/day<br/>per million people</th>
                <th id="tests" class="bg-primary-lighter">Avg. positive test rate/day</th>
              </tr>
            </thead>
            <tbody>
            </tbody>
          </table>

        </div>
      </div>
    </div>

    <script src="uswds-2.5.1/js/uswds.min.js"></script>

    <script type="text/javascript">
      window.addEventListener('DOMContentLoaded', () => {

        const data = [{'state': 'Alabama', 'avg_cases_per_day': '316', 'avg_deaths_per_day': '6', 'avg_positive_test_rate': '14.55%'}, {'state': 'Alaska', 'avg_cases_per_day': '678', 'avg_deaths_per_day': '2', 'avg_positive_test_rate': '2.49%'}, {'state': 'American Samoa', 'avg_cases_per_day': '0', 'avg_deaths_per_day': '0', 'avg_positive_test_rate': '0.0%'}, {'state': 'Arizona', 'avg_cases_per_day': '285', 'avg_deaths_per_day': '3', 'avg_positive_test_rate': '13.84%'}, {'state': 'Arkansas', 'avg_cases_per_day': '492', 'avg_deaths_per_day': '5', 'avg_positive_test_rate': '8.54%'}, {'state': 'California', 'avg_cases_per_day': '162', 'avg_deaths_per_day': '1', 'avg_positive_test_rate': '4.89%'}, {'state': 'Colorado', 'avg_cases_per_day': '588', 'avg_deaths_per_day': '2', 'avg_positive_test_rate': '5.78%'}, {'state': 'Connecticut', 'avg_cases_per_day': '375', 'avg_deaths_per_day': '3', 'avg_positive_test_rate': '3.16%'}, {'state': 'Delaware', 'avg_cases_per_day': '265', 'avg_deaths_per_day': '2', 'avg_positive_test_rate': '4.52%'}, {'state': 'District of Columbia', 'avg_cases_per_day': '157', 'avg_deaths_per_day': '2', 'avg_positive_test_rate': '3.25%'}, {'state': 'Florida', 'avg_cases_per_day': '240', 'avg_deaths_per_day': '3', 'avg_positive_test_rate': '7.9%'}, {'state': 'Georgia', 'avg_cases_per_day': '151', 'avg_deaths_per_day': '4', 'avg_positive_test_rate': '10.0%'}, {'state': 'Guam', 'avg_cases_per_day': '734', 'avg_deaths_per_day': '7', 'avg_positive_test_rate': '7.36%'}, {'state': 'Hawaii', 'avg_cases_per_day': '80', 'avg_deaths_per_day': '0', 'avg_positive_test_rate': '2.86%'}, {'state': 'Idaho', 'avg_cases_per_day': '670', 'avg_deaths_per_day': '5', 'avg_positive_test_rate': '17.76%'}, {'state': 'Illinois', 'avg_cases_per_day': '902', 'avg_deaths_per_day': '7', 'avg_positive_test_rate': '5.82%'}, {'state': 'Indiana', 'avg_cases_per_day': '692', 'avg_deaths_per_day': '6', 'avg_positive_test_rate': '6.57%'}, {'state': 'Iowa', 'avg_cases_per_day': '1,142', 'avg_deaths_per_day': '5', 'avg_positive_test_rate': '15.04%'}, {'state': 'Kansas', 'avg_cases_per_day': '834', 'avg_deaths_per_day': '6', 'avg_positive_test_rate': '14.68%'}, {'state': 'Kentucky', 'avg_cases_per_day': '458', 'avg_deaths_per_day': '3', 'avg_positive_test_rate': '5.82%'}, {'state': 'Louisiana', 'avg_cases_per_day': '139', 'avg_deaths_per_day': '3', 'avg_positive_test_rate': '6.68%'}, {'state': 'Maine', 'avg_cases_per_day': '120', 'avg_deaths_per_day': '1', 'avg_positive_test_rate': '1.13%'}, {'state': 'Maryland', 'avg_cases_per_day': '228', 'avg_deaths_per_day': '2', 'avg_positive_test_rate': '4.23%'}, {'state': 'Massachusetts', 'avg_cases_per_day': '293', 'avg_deaths_per_day': '3', 'avg_positive_test_rate': '2.56%'}, {'state': 'Michigan', 'avg_cases_per_day': '568', 'avg_deaths_per_day': '5', 'avg_positive_test_rate': '4.41%'}, {'state': 'Minnesota', 'avg_cases_per_day': '852', 'avg_deaths_per_day': '6', 'avg_positive_test_rate': '5.87%'}, {'state': 'Mississippi', 'avg_cases_per_day': '342', 'avg_deaths_per_day': '5', 'avg_positive_test_rate': '12.92%'}, {'state': 'Missouri', 'avg_cases_per_day': '646', 'avg_deaths_per_day': '5', 'avg_positive_test_rate': '7.85%'}, {'state': 'Montana', 'avg_cases_per_day': '817', 'avg_deaths_per_day': '9', 'avg_positive_test_rate': '7.42%'}, {'state': 'Nebraska', 'avg_cases_per_day': '1,010', 'avg_deaths_per_day': '5', 'avg_positive_test_rate': '7.97%'}, {'state': 'Nevada', 'avg_cases_per_day': '432', 'avg_deaths_per_day': '3', 'avg_positive_test_rate': '8.22%'}, {'state': 'New Hampshire', 'avg_cases_per_day': '167', 'avg_deaths_per_day': '1', 'avg_positive_test_rate': '1.89%'}, {'state': 'New Jersey', 'avg_cases_per_day': '293', 'avg_deaths_per_day': '1', 'avg_positive_test_rate': '5.13%'}, {'state': 'New Mexico', 'avg_cases_per_day': '566', 'avg_deaths_per_day': '7', 'avg_positive_test_rate': '4.3%'}, {'state': 'New York', 'avg_cases_per_day': '185', 'avg_deaths_per_day': '1', 'avg_positive_test_rate': '3.38%'}, {'state': 'North Carolina', 'avg_cases_per_day': '242', 'avg_deaths_per_day': '3', 'avg_positive_test_rate': '6.73%'}, {'state': 'North Dakota', 'avg_cases_per_day': '1,701', 'avg_deaths_per_day': '12', 'avg_positive_test_rate': '6.01%'}, {'state': 'Northern Mariana Islands', 'avg_cases_per_day': '10', 'avg_deaths_per_day': '0', 'avg_positive_test_rate': '0.61%'}, {'state': 'Ohio', 'avg_cases_per_day': '454', 'avg_deaths_per_day': '2', 'avg_positive_test_rate': '5.17%'}, {'state': 'Oklahoma', 'avg_cases_per_day': '526', 'avg_deaths_per_day': '3', 'avg_positive_test_rate': '7.94%'}, {'state': 'Oregon', 'avg_cases_per_day': '194', 'avg_deaths_per_day': '1', 'avg_positive_test_rate': '5.54%'}, {'state': 'Pennsylvania', 'avg_cases_per_day': '287', 'avg_deaths_per_day': '3', 'avg_positive_test_rate': '8.66%'}, {'state': 'Puerto Rico', 'avg_cases_per_day': '148', 'avg_deaths_per_day': '2', 'avg_positive_test_rate': '11.02%'}, {'state': 'Rhode Island', 'avg_cases_per_day': '628', 'avg_deaths_per_day': '4', 'avg_positive_test_rate': '3.02%'}, {'state': 'South Carolina', 'avg_cases_per_day': '225', 'avg_deaths_per_day': '3', 'avg_positive_test_rate': '9.53%'}, {'state': 'South Dakota', 'avg_cases_per_day': '1,438', 'avg_deaths_per_day': '17', 'avg_positive_test_rate': '19.91%'}, {'state': 'Tennessee', 'avg_cases_per_day': '493', 'avg_deaths_per_day': '6', 'avg_positive_test_rate': '7.28%'}, {'state': 'Texas', 'avg_cases_per_day': '291', 'avg_deaths_per_day': '3', 'avg_positive_test_rate': '10.97%'}, {'state': 'U.S. Virgin Islands', 'avg_cases_per_day': '30', 'avg_deaths_per_day': '0', 'avg_positive_test_rate': '5.54%'}, {'state': 'Utah', 'avg_cases_per_day': '813', 'avg_deaths_per_day': '2', 'avg_positive_test_rate': '8.86%'}, {'state': 'Vermont', 'avg_cases_per_day': '61', 'avg_deaths_per_day': '0', 'avg_positive_test_rate': '0.55%'}, {'state': 'Virginia', 'avg_cases_per_day': '179', 'avg_deaths_per_day': '1', 'avg_positive_test_rate': '6.9%'}, {'state': 'Washington', 'avg_cases_per_day': '188', 'avg_deaths_per_day': '2', 'avg_positive_test_rate': '4.47%'}, {'state': 'West Virginia', 'avg_cases_per_day': '337', 'avg_deaths_per_day': '6', 'avg_positive_test_rate': '3.34%'}, {'state': 'Wisconsin', 'avg_cases_per_day': '1,081', 'avg_deaths_per_day': '8', 'avg_positive_test_rate': '7.91%'}, {'state': 'Wyoming', 'avg_cases_per_day': '1,069', 'avg_deaths_per_day': '5', 'avg_positive_test_rate': '12.24%'}];

        const render = () => {
          const tbody = document.querySelector('tbody');
          tbody.innerText = '';

          data.forEach((row, i) => {
            const tr = document.createElement('tr');

            const order = document.createElement('td');
            order.innerText = i + 1;
            order.setAttribute('class', 'order');
            tr.appendChild(order);

            const location = document.createElement('td');
            location.innerText = row.state;
            location.setAttribute('class', 'location');
            tr.appendChild(location);

            const deaths = document.createElement('td');
            deaths.innerText = row.avg_deaths_per_day;
            deaths.setAttribute('class', 'deaths');
            tr.appendChild(deaths);

            const cases = document.createElement('td');
            cases.innerText = row.avg_cases_per_day;
            cases.setAttribute('class', 'cases');
            tr.appendChild(cases);

            const tests = document.createElement('td');
            tests.innerText = row.avg_positive_test_rate;
            tests.setAttribute('class', 'tests');
            tr.appendChild(tests);

            tbody.appendChild(tr);
          })
        };

        const sortBy = (key) => {
          data.sort((a,b) => {
            const va = key === 'state' ? b[key] : +(a[key].replace(/[^\d.]/g, ''));
            const vb = key === 'state' ? a[key] : +(b[key].replace(/[^\d.]/g, ''));

            if(va === vb) {
              return 0;
            }
            if(va > vb) {
              return -1;
            }
            return 1;
          });
          render();
        };

        document.getElementById('location').addEventListener('click', () => {
          sortBy('state')
        });
        document.getElementById('deaths').addEventListener('click', () => {
          sortBy('avg_deaths_per_day')
        });
        document.getElementById('cases').addEventListener('click', () => {
          sortBy('avg_cases_per_day')
        });
        document.getElementById('tests').addEventListener('click', () => {
          sortBy('avg_positive_test_rate')
        });

        sortBy('avg_deaths_per_day');
      })
    </script>
  </body>
</html>